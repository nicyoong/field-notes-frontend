/* Field Notes, Research / Insights Microsite
   Frontend-only, calm + analytical aesthetic
   -------------------------------------------------- */

:root{
  /* Base surfaces */
  --bg: #f6f4ef;          /* warm paper */
  --panel: #f1eee8;       /* card surface */
  --soft: #ebe7e0;

  /* Text */
  --ink: #1a1a18;         /* near-black, warm */
  --muted: #5f5c55;
  --faint: #8a867d;

  /* Lines */
  --border: #d8d4cb;

  /* Accents (editorial, not SaaS) */
  --accent: #8c2f1c;      /* oxblood / clay */
  --accent2: #5f6f52;     /* mossy green */
  --warn: #9a6a2f;

  /* Shape */
  --radius: 16px;
  --radius-sm: 10px;
  --shadow: 0 8px 24px rgba(0,0,0,.08);

  /* Reading */
  --measure: 72ch;
  --lh: 1.65;

  /* Fonts */
  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  --font-serif: ui-serif, "Iowan Old Style", "Palatino Linotype", Palatino, Georgia, serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

  /* Type scale */
  --step--1: clamp(.86rem, .83rem + .1vw, .92rem);
  --step-0:  clamp(1.0rem, .95rem + .25vw, 1.1rem);
  --step-1:  clamp(1.15rem, 1.05rem + .45vw, 1.3rem);
  --step-2:  clamp(1.45rem, 1.25rem + .9vw, 1.9rem);
  --step-3:  clamp(1.95rem, 1.55rem + 1.5vw, 2.6rem);
  --step-4:  clamp(2.3rem, 1.8rem + 2.2vw, 3.2rem);

  --header-h: 72px;
}

/* Dark mode (automatic) */
@media (prefers-color-scheme: dark) {
  :root{
    --bg: #121211;
    --panel: #171715;
    --soft: #1d1d1a;

    --ink: #efede8;
    --muted: #b3afa6;
    --faint: #8f8b82;

    --border: #2a2a26;

    --accent: #d16a4a;    /* warm clay highlight */
    --accent2: #8fa38a;   /* muted sage */
    --warn: #d4a24c;

    --shadow: 0 12px 28px rgba(0,0,0,.45);
  }
}

/* Base */
*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: var(--font-sans);
  color: var(--ink);
  background:
    radial-gradient(1200px 600px at 10% -20%, rgba(0,0,0,.035), transparent 60%),
    radial-gradient(900px 500px at 90% 0%, rgba(0,0,0,.03), transparent 55%),
    var(--bg);
  line-height: var(--lh);
  font-size: var(--step-0);
}
a{ color: inherit; text-decoration: none; }
a:hover{ text-decoration: underline; text-underline-offset: .2em; }
img{ max-width:100%; height:auto; }
::selection{ background: rgba(31,79,214,.18); }

.container{
  max-width: 1160px;
  padding: 0 20px;
  margin: 0 auto;
}

.skip-link{
  position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  left:16px; top:16px; width:auto; height:auto; padding:10px 12px;
  background:var(--panel); border:1px solid var(--border); border-radius:999px; z-index:9999;
  box-shadow: var(--shadow);
}

/* Header */
.site-header{
  position: sticky;
  top:0;
  z-index: 50;
  height: var(--header-h);
  backdrop-filter: blur(12px);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  border-bottom: 1px solid var(--border);
}
.header-inner{
  height:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}
.brand{
  display:flex;
  align-items:center;
  gap:12px;
  min-width: 220px;
}
.brand-mark{
  width:34px; height:34px; border-radius: 12px;
  background: linear-gradient(135deg, var(--accent), color-mix(in srgb, var(--accent2) 60%, var(--accent)));
  box-shadow: 0 10px 22px rgba(31,79,214,.22);
}
.brand-text{
  line-height:1.1;
}
.brand-text strong{
  display:block;
  font-weight: 700;
  letter-spacing: .2px;
}
.brand-text span{
  color: var(--muted);
  font-size: var(--step--1);
}

.nav{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap: wrap;
  justify-content: flex-end;
}
.nav a{
  font-size: var(--step--1);
  color: var(--muted);
  padding:8px 10px;
  border-radius: 999px;
}
.nav a[aria-current="page"]{
  background: var(--soft);
  color: var(--ink);
  text-decoration:none;
}
.nav a:hover{
  background: color-mix(in srgb, var(--soft) 70%, transparent);
  text-decoration:none;
}

/* Utility */
.row{ display:flex; gap:22px; }
.stack{ display:flex; flex-direction: column; gap:14px; }
.grid{
  display:grid;
  gap:18px;
  grid-template-columns: repeat(12, 1fr);
}
.card{
  background: var(--panel);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.card.pad{ padding: 18px; }
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--panel) 80%, transparent);
  border-radius: 999px;
  padding:6px 10px;
  font-size: var(--step--1);
  color: var(--muted);
}
.pill strong{
  color: var(--ink);
  font-weight: 650;
}
.tag{
  display:inline-flex;
  align-items:center;
  padding:4px 10px;
  border-radius: 999px;
  font-size: var(--step--1);
  border: 1px solid color-mix(in srgb, var(--accent2) 40%, var(--border));
  background: color-mix(in srgb, var(--accent2) 12%, transparent);
  color: color-mix(in srgb, var(--accent2) 78%, var(--ink));
}

/* Hero */
.hero{
  padding: 46px 0 22px;
}
.hero h1{
  font-size: var(--step-4);
  line-height: 1.08;
  margin: 0 0 12px;
  letter-spacing: -0.5px;
  font-weight: 760;
}
.hero p{
  margin:0;
  color: var(--muted);
  max-width: 70ch;
  font-size: var(--step-1);
}
.hero .meta{
  margin-top: 18px;
  display:flex;
  gap:10px;
  flex-wrap: wrap;
}

/* Sections */
.section{
  padding: 22px 0 38px;
}
.section h2{
  font-size: var(--step-2);
  margin: 0 0 12px;
  letter-spacing: -0.2px;
}
.section-head{
  display:flex;
  align-items:flex-end;
  justify-content: space-between;
  gap: 14px;
  margin-bottom: 14px;
}
.section-head p{
  margin:0;
  color: var(--muted);
  max-width: 65ch;
}
.section-head a{
  font-size: var(--step--1);
  color: var(--accent);
}

/* Article cards */
.item{
  padding: 18px;
}
.item h3{
  margin: 0 0 8px;
  font-size: var(--step-1);
  letter-spacing: -0.2px;
}
.item p{
  margin:0 0 12px;
  color: var(--muted);
  font-size: var(--step--1);
}
.item .row{
  align-items:center;
  justify-content: space-between;
  gap: 10px;
}
.item .meta{
  display:flex; gap:10px; flex-wrap: wrap; align-items:center;
  font-size: var(--step--1); color: var(--faint);
}
.item .meta span{
  display:inline-flex; gap:8px; align-items:center;
}
.dot{ width:4px; height:4px; border-radius:50%; background: var(--border); display:inline-block; }

/* Footer */
.site-footer{
  padding: 34px 0 54px;
  border-top: 1px solid var(--border);
  color: var(--muted);
}
.footer-inner{
  display:flex;
  gap: 18px;
  align-items:flex-start;
  justify-content: space-between;
  flex-wrap: wrap;
}
.site-footer small{ color: var(--faint); }
.footer-links{
  display:flex;
  gap: 10px 14px;
  flex-wrap: wrap;
}
.footer-links a{ font-size: var(--step--1); color: var(--muted); }
.footer-links a:hover{ color: var(--ink); text-decoration:none; }

/* Article layout */
.article-wrap{
  padding: 22px 0 44px;
}
.article-grid{
  display:grid;
  grid-template-columns: 320px minmax(0, 1fr);
  gap: 24px;
  align-items: start;
}
@media (max-width: 980px){
  .article-grid{ grid-template-columns: 1fr; }
}
.article-main{
  min-width: 0;
}
.article{
  max-width: var(--measure);
}
.kicker{
  color: var(--muted);
  font-size: var(--step--1);
  letter-spacing: .4px;
  text-transform: uppercase;
}
.article h1{
  font-family: var(--font-sans);
  font-size: var(--step-3);
  line-height: 1.1;
  margin: 8px 0 10px;
  letter-spacing: -0.4px;
}
.article .subtitle{
  color: var(--muted);
  margin: 0 0 16px;
  font-size: var(--step-1);
  max-width: 68ch;
}
.article .byline{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items:center;
  color: var(--faint);
  font-size: var(--step--1);
  margin-bottom: 18px;
}
.article .byline a{ color: var(--accent); text-decoration:none; }
.article .byline a:hover{ text-decoration: underline; }
.article hr{
  border:0;
  height:1px;
  background: var(--border);
  margin: 26px 0;
}
.prose{
  font-family: var(--font-serif);
  font-size: 1.05em;
}
.prose p{ margin: 0 0 1.05em; }
.prose h2, .prose h3{
  font-family: var(--font-sans);
  letter-spacing: -0.2px;
}
.prose h2{ font-size: var(--step-2); margin: 1.4em 0 .55em; }
.prose h3{ font-size: var(--step-1); margin: 1.15em 0 .4em; }
.prose blockquote{
  margin: 1.2em 0;
  padding: 14px 16px;
  border-left: 3px solid color-mix(in srgb, var(--accent) 60%, var(--border));
  background: color-mix(in srgb, var(--accent) 7%, transparent);
  border-radius: 12px;
  color: color-mix(in srgb, var(--ink) 92%, var(--muted));
}
.prose code{
  font-family: var(--font-mono);
  font-size: .92em;
  background: color-mix(in srgb, var(--soft) 85%, transparent);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .08em .45em;
}
.prose pre{
  font-family: var(--font-mono);
  font-size: .9em;
  background: var(--soft);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 14px;
  overflow:auto;
}
.prose pre code{ background: transparent; border:0; padding:0; }

/* Pull quote */
.pull{
  margin: 1.8em 0;
  padding: 18px 18px;
  border:1px dashed color-mix(in srgb, var(--border) 55%, var(--accent));
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--panel) 86%, transparent);
}
.pull .quote{
  font-family: var(--font-sans);
  font-size: var(--step-2);
  line-height: 1.2;
  letter-spacing: -0.3px;
  margin:0 0 8px;
}
.pull .cite{
  color: var(--muted);
  font-size: var(--step--1);
}

/* Side rail (TOC) */
.rail{
  position: sticky;
  top: calc(var(--header-h) + 16px);
  align-self: start;
  max-height: calc(100vh - var(--header-h) - 30px);
  overflow: auto;
  padding-bottom: 16px;
}
@media (max-width: 980px){
  .rail{ position: static; max-height: none; overflow: visible; }
}
.toc{
  padding: 16px;
}
.toc h2{
  font-size: var(--step--1);
  text-transform: uppercase;
  letter-spacing: .35px;
  color: var(--faint);
  margin: 0 0 10px;
}
.toc nav{
  display:flex;
  flex-direction: column;
  gap: 6px;
}
.toc a{
  display:block;
  padding: 8px 10px;
  border-radius: 12px;
  color: var(--muted);
  font-size: var(--step--1);
  text-decoration:none;
  border: 1px solid transparent;
}
.toc a.depth-3{ padding-left: 22px; }
.toc a:hover{
  background: color-mix(in srgb, var(--soft) 65%, transparent);
}
.toc a.is-active{
  background: color-mix(in srgb, var(--accent) 12%, transparent);
  border-color: color-mix(in srgb, var(--accent) 30%, var(--border));
  color: var(--ink);
}

/* Reading progress bar */
.progress{
  position: fixed;
  top: 0;
  left: 0;
  height: 3px;
  width: 100%;
  z-index: 80;
  pointer-events: none;
  background: transparent;
}
.progress > i{
  display:block;
  height:100%;
  width: 0%;
  background: linear-gradient(90deg, var(--accent), color-mix(in srgb, var(--accent2) 55%, var(--accent)));
}

/* Footnotes (inline popover) */
.fn-pop{
  position: fixed;
  max-width: min(520px, calc(100vw - 32px));
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
  padding: 12px 12px;
  z-index: 200;
}
.fn-pop .fn-head{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  font-family: var(--font-sans);
  font-size: var(--step--1);
  color: var(--muted);
  margin-bottom: 8px;
}
.fn-pop button{
  border: 1px solid var(--border);
  background: var(--soft);
  border-radius: 10px;
  padding: 6px 10px;
  font-size: var(--step--1);
  cursor:pointer;
  color: var(--muted);
}
.fn-pop button:hover{ color: var(--ink); }

.footnotes{
  margin-top: 32px;
  padding-top: 18px;
  border-top: 1px solid var(--border);
  color: var(--muted);
  font-family: var(--font-sans);
}
.footnotes h2{
  font-size: var(--step-1);
  margin: 0 0 10px;
}
.footnotes ol{
  margin:0;
  padding-left: 18px;
}
.footnotes li{
  margin: 0 0 10px;
  font-size: var(--step--1);
}
.fn-ref{
  text-decoration: none;
  color: var(--accent);
}
.fn-ref:hover{ text-decoration: underline; }

/* Inline citation blocks */
.citation{
  margin: 1.2em 0;
  padding: 12px 14px;
  background: color-mix(in srgb, var(--soft) 70%, transparent);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-family: var(--font-sans);
}
.citation .label{
  color: var(--faint);
  font-size: var(--step--1);
  text-transform: uppercase;
  letter-spacing: .35px;
}
.citation .src{
  margin-top: 6px;
  font-size: var(--step--1);
  color: var(--muted);
}
.citation a{ color: var(--accent); text-decoration:none; }
.citation a:hover{ text-decoration: underline; }

/* Controls (Insights page) */
.controls{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  margin: 10px 0 18px;
}
.control{
  display:flex;
  align-items:center;
  gap: 8px;
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: color-mix(in srgb, var(--panel) 85%, transparent);
  font-size: var(--step--1);
  color: var(--muted);
}
.control select, .control input{
  border:0;
  outline:0;
  background: transparent;
  font: inherit;
  color: var(--ink);
}
.control input[type="search"]{ min-width: 220px; }
@media (max-width: 520px){
  .control input[type="search"]{ min-width: 160px; }
}

.pills{
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
}
.pills button{
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 999px;
  padding: 7px 10px;
  font-size: var(--step--1);
  color: var(--muted);
  cursor: pointer;
}
.pills button[aria-pressed="true"]{
  background: color-mix(in srgb, var(--accent) 12%, transparent);
  border-color: color-mix(in srgb, var(--accent) 35%, var(--border));
  color: var(--ink);
}
.pills button:hover{
  background: color-mix(in srgb, var(--soft) 60%, transparent);
  color: var(--ink);
}

/* CTA */
.cta{
  padding: 18px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 16px;
}
@media (max-width: 820px){
  .cta{ flex-direction: column; align-items:flex-start; }
}
.cta h3{ margin:0; font-size: var(--step-1); letter-spacing: -0.2px; }
.cta p{ margin: 6px 0 0; color: var(--muted); font-size: var(--step--1); max-width: 70ch; }
.cta form{
  display:flex; gap: 10px; flex-wrap: wrap; justify-content:flex-end;
}
.cta input{
  border:1px solid var(--border);
  background: var(--panel);
  border-radius: 999px;
  padding: 10px 12px;
  font: inherit;
  min-width: 240px;
}
.cta button{
  border: 1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 92%, #fff), var(--accent));
  color: #fff;
  border-radius: 999px;
  padding: 10px 14px;
  cursor:pointer;
  font: inherit;
}
.cta button:hover{ filter: brightness(1.03); }

/* Small details */
.kbd{
  font-family: var(--font-mono);
  font-size: .85em;
  padding: 2px 6px;
  border: 1px solid var(--border);
  border-bottom-width: 2px;
  border-radius: 8px;
  background: color-mix(in srgb, var(--soft) 65%, transparent);
  color: var(--muted);
}

/* Print-friendly */
@media print{
  :root{ --bg:#fff; --panel:#fff; --ink:#000; --muted:#333; --border:#ddd; --soft:#f5f5f5; }
  .site-header, .site-footer, .rail, .progress, .cta, .controls{ display:none !important; }
  body{ background:#fff; }
  a{ text-decoration: underline; }
  .card{ box-shadow:none; }
  .article-wrap{ padding:0; }
  .article h1{ font-size: 26pt; }
  .prose{ font-size: 11.5pt; }
  .prose a::after{
    content: " (" attr(href) ")";
    font-size: 9pt;
    color:#555;
  }
}
